Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | ❌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | ❌             | ❌             | ❌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | ❌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | ❌             | ❌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   340.130M memsize (     0.000  retained)
                         6.660M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    56.190M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
           Oj.dump c    56.190M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
       Oj.dump c, aj    56.190M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   56190000 allocated
           Oj.dump o:   56190000 allocated - same
           Oj.dump c:   56190000 allocated - same
            to_json::  340130000 allocated - 6.05x more
---------------------------------------------

                     user     system      total        real
to_json:         3.280000   0.420000   3.700000 (  3.723582)
Oj.dump o        0.150000   0.010000   0.160000 (  0.149966)
Oj.dump c        0.380000   0.020000   0.400000 (  0.407938)
Oj.dump c, aj    0.460000   0.000000   0.460000 (  0.462220)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | ❌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | ❌             | ❌             | ❌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | ❌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | ❌             | ❌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.730M memsize (     0.000  retained)
                         6.550M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    49.390M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
           Oj.dump c    49.390M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
       Oj.dump c, aj    49.390M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   49390000 allocated
           Oj.dump c:   49390000 allocated - same
       Oj.dump c, aj:   49390000 allocated - same
            to_json::  335730000 allocated - 6.80x more
---------------------------------------------

                     user     system      total        real
to_json:         2.970000   0.480000   3.450000 (  3.452772)
Oj.dump o        0.150000   0.000000   0.150000 (  0.154787)
Oj.dump c        0.390000   0.010000   0.400000 (  0.394206)
Oj.dump c, aj    0.440000   0.030000   0.470000 (  0.473353)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb
/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from /projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from /projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from compatibility_test.rb:86:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | ❌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | ❌             | ❌             | ❌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | ❌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | ❌             | ❌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   340.130M memsize (     0.000  retained)
                         6.660M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    56.190M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
           Oj.dump c    56.190M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)
       Oj.dump c, aj    56.190M memsize (     0.000  retained)
                       990.000k objects (     0.000  retained)
                        38.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   56190000 allocated
           Oj.dump o:   56190000 allocated - same
           Oj.dump c:   56190000 allocated - same
            to_json::  340130000 allocated - 6.05x more
---------------------------------------------

                     user     system      total        real
to_json:         3.000000   0.130000   3.130000 (  3.138981)
Oj.dump o        0.150000   0.000000   0.150000 (  0.146562)
Oj.dump c        0.330000   0.030000   0.360000 (  0.358239)
Oj.dump c, aj    0.490000   0.000000   0.490000 (  0.486554)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | ❌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | ❌             | ❌             | ❌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | ❌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | ❌             | ❌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.730M memsize (     0.000  retained)
                         6.550M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    49.390M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
           Oj.dump c    49.390M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
       Oj.dump c, aj    49.390M memsize (     0.000  retained)
                       820.000k objects (     0.000  retained)
                        36.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   49390000 allocated
           Oj.dump c:   49390000 allocated - same
       Oj.dump c, aj:   49390000 allocated - same
            to_json::  335730000 allocated - 6.80x more
---------------------------------------------

                     user     system      total        real
to_json:         3.030000   0.510000   3.540000 (  3.544730)
Oj.dump o        0.140000   0.000000   0.140000 (  0.147846)
Oj.dump c        0.350000   0.000000   0.350000 (  0.347998)
Oj.dump c, aj    0.460000   0.030000   0.490000 (  0.483229)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 👌            | ❌             | ❌             | 👌                      |
| FalseClass                      | 👌            | 👌             | 👌             | 👌                      |
| NilClass                        | 👌            | 👌             | 👌             | 👌                      |
| Object                          | ❌            | ❌             | 👌             | 👌                      |
| TrueClass                       | 👌            | 👌             | 👌             | 👌                      |
| String                          | 👌            | 👌             | 👌             | 👌                      |
| StringChinese                   | 👌            | ❌             | ❌             | ❌                      |
| StringSpecial                   | ❌            | 👌             | 👌             | 👌                      |
| Numeric                         | 👌            | 👌             | 👌             | 👌                      |
| Symbol                          | 👌            | ❌             | 👌             | 👌                      |
| Time                            | ❌            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 👌            | ❌             | 👌             | 👌                      |
| DateTime                        | ❌            | ❌             | ❌             | 👌                      |
| Enumerable                      | ❌            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 👌            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | ❌            | ❌             | ❌             | 👌                      |
| Struct                          | ❌            | ❌             | ❌             | 👌                      |
| Float                           | 👌            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 👌            | ❌             | 👌             | 👌                      |
| Process::Status                 | ❌            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | ❌            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | ❌            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | ❌            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 👌            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | ❌            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   314.630M memsize (     0.000  retained)
                         6.390M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    41.980M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
           Oj.dump c    41.980M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
       Oj.dump c, aj    41.980M memsize (     0.000  retained)
                       660.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   41980000 allocated
           Oj.dump c:   41980000 allocated - same
       Oj.dump c, aj:   41980000 allocated - same
            to_json::  314630000 allocated - 7.49x more
---------------------------------------------

                     user     system      total        real
to_json:         3.240000   0.160000   3.400000 (  3.412781)
Oj.dump o        0.170000   0.000000   0.170000 (  0.176517)
Oj.dump c        0.420000   0.020000   0.440000 (  0.442841)
Oj.dump c, aj    0.530000   0.030000   0.560000 (  0.555131)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | ❌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | ❌             | ❌             | ❌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | ❌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | ❌             | ❌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | 💀            | 💀             | 💀             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   335.730M memsize (     0.000  retained)
                         6.550M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    51.790M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
           Oj.dump c    51.790M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)
       Oj.dump c, aj    51.790M memsize (     0.000  retained)
                       880.000k objects (     0.000  retained)
                        33.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:   51790000 allocated
           Oj.dump o:   51790000 allocated - same
           Oj.dump c:   51790000 allocated - same
            to_json::  335730000 allocated - 6.48x more
---------------------------------------------

                     user     system      total        real
to_json:         2.980000   0.190000   3.170000 (  3.177626)
Oj.dump o        0.150000   0.000000   0.150000 (  0.152403)
Oj.dump c        0.540000   0.050000   0.590000 (  0.593281)
Oj.dump c, aj    0.410000   0.010000   0.420000 (  0.414489)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | ❌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | ❌             | ❌             | ❌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | ❌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | ❌             | ❌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | 💀            | 💀             | 💀             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   331.330M memsize (     0.000  retained)
                         6.440M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    44.990M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)
           Oj.dump c    44.990M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)
       Oj.dump c, aj    44.990M memsize (     0.000  retained)
                       710.000k objects (     0.000  retained)
                        31.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   44990000 allocated
           Oj.dump c:   44990000 allocated - same
       Oj.dump c, aj:   44990000 allocated - same
            to_json::  331330000 allocated - 7.36x more
---------------------------------------------

                     user     system      total        real
to_json:         3.200000   0.140000   3.340000 (  3.356537)
Oj.dump o        0.140000   0.000000   0.140000 (  0.152084)
Oj.dump c        0.370000   0.020000   0.390000 (  0.379723)
Oj.dump c, aj    0.380000   0.000000   0.380000 (  0.393381)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path /projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 👌            | ❌             | ❌             | 👌                      |
| FalseClass                      | 👌            | 👌             | 👌             | 👌                      |
| NilClass                        | 👌            | 👌             | 👌             | 👌                      |
| Object                          | ❌            | ❌             | 👌             | 👌                      |
| TrueClass                       | 👌            | 👌             | 👌             | 👌                      |
| String                          | 👌            | 👌             | 👌             | 👌                      |
| StringChinese                   | 👌            | ❌             | ❌             | ❌                      |
| StringSpecial                   | ❌            | 👌             | 👌             | 👌                      |
| Numeric                         | 👌            | 👌             | 👌             | 👌                      |
| Symbol                          | 👌            | ❌             | 👌             | 👌                      |
| Time                            | ❌            | ❌             | ❌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 👌            | ❌             | 👌             | 👌                      |
| DateTime                        | ❌            | ❌             | ❌             | 👌                      |
| Enumerable                      | ❌            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 👌            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | ❌            | ❌             | ❌             | 👌                      |
| Struct                          | ❌            | ❌             | ❌             | 👌                      |
| Float                           | 👌            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 👌            | ❌             | 👌             | 👌                      |
| Process::Status                 | ❌            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | ❌            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | ❌            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | ❌            | ❌             | ❌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 👌            | ❌             | ❌             | ❌                      |
| ActiveRecord::Relation          | ❌            | 💀             | 💀             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   311.030M memsize (     0.000  retained)
                         6.300M objects (     0.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o    38.380M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)
           Oj.dump c    38.380M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)
       Oj.dump c, aj    38.380M memsize (     0.000  retained)
                       570.000k objects (     0.000  retained)
                        27.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:   38380000 allocated
           Oj.dump c:   38380000 allocated - same
       Oj.dump c, aj:   38380000 allocated - same
            to_json::  311030000 allocated - 8.10x more
---------------------------------------------

                     user     system      total        real
to_json:         2.470000   0.110000   2.580000 (  2.576725)
Oj.dump o        0.130000   0.000000   0.130000 (  0.132420)
Oj.dump c        0.320000   0.030000   0.350000 (  0.352933)
Oj.dump c, aj    0.370000   0.010000   0.380000 (  0.380488)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb
