Ignoring: branches, cache, langauge, sudo
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | 👌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | 👌             | 👌             | 👌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | 👌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | 👌             | 👌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Complex                         | 💀            | 💀             | 👌             | 👌                      |
| Exception                       | 💀            | ❌             | ❌             | 👌                      |
| OpenStruct                      | 💀            | ❌             | 👌             | 👌                      |
| Rational                        | 💀            | ❌             | ❌             | ❌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   476.213M memsize (   248.000  retained)
                         9.690M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   151.250M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
           Oj.dump c   151.250M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
       Oj.dump c, aj   151.250M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:  151250000 allocated
           Oj.dump o:  151250000 allocated - same
           Oj.dump c:  151250000 allocated - same
            to_json::  476212520 allocated - 3.15x more
---------------------------------------------

                     user     system      total        real
to_json:         3.300000   0.080000   3.380000 (  3.389566)
Oj.dump o        0.570000   0.010000   0.580000 (  0.585122)
Oj.dump c        0.630000   0.010000   0.640000 (  0.637937)
Oj.dump c, aj    0.710000   0.010000   0.720000 (  0.716431)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | 👌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | 👌             | 👌             | 👌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | 👌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | 👌             | 👌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Complex                         | 💀            | 💀             | 👌             | 👌                      |
| Exception                       | 💀            | ❌             | ❌             | 👌                      |
| OpenStruct                      | 💀            | ❌             | 👌             | 👌                      |
| Rational                        | 💀            | ❌             | ❌             | ❌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   473.013M memsize (   248.000  retained)
                         9.610M objects (     4.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   145.650M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
           Oj.dump c   145.650M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
       Oj.dump c, aj   145.650M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  145650000 allocated
           Oj.dump c:  145650000 allocated - same
       Oj.dump c, aj:  145650000 allocated - same
            to_json::  473012520 allocated - 3.25x more
---------------------------------------------

                     user     system      total        real
to_json:         3.220000   0.050000   3.270000 (  3.281758)
Oj.dump o        0.530000   0.010000   0.540000 (  0.547950)
Oj.dump c        0.620000   0.010000   0.630000 (  0.633615)
Oj.dump c, aj    0.690000   0.010000   0.700000 (  0.689771)

SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
START gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
/Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)
	from /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/numeric/time.rb:50:in `days'
	from /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle/ruby/2.4.0/gems/activesupport-4.1.16/lib/active_support/core_ext/integer/time.rb:36:in `months'
	from /Users/vvysokins/projects/ruby-json-benchmark/test_data.rb:90:in `<top (required)>'
	from compatibility_test.rb:1:in `require'
	from compatibility_test.rb:1:in `<main>'
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | 👌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | 👌             | 👌             | 👌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | 👌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | 👌             | 👌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Complex                         | 💀            | 💀             | 👌             | 👌                      |
| Exception                       | 💀            | ❌             | ❌             | 👌                      |
| OpenStruct                      | 💀            | ❌             | 👌             | 👌                      |
| Rational                        | 💀            | ❌             | ❌             | ❌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   476.213M memsize (   344.000  retained)
                         9.690M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   151.250M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
           Oj.dump c   151.250M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
       Oj.dump c, aj   151.250M memsize (     0.000  retained)
                         3.180M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:  151250000 allocated
           Oj.dump o:  151250000 allocated - same
           Oj.dump c:  151250000 allocated - same
            to_json::  476212520 allocated - 3.15x more
---------------------------------------------

                     user     system      total        real
to_json:         3.300000   0.150000   3.450000 (  3.457063)
Oj.dump o        0.500000   0.010000   0.510000 (  0.510131)
Oj.dump c        0.590000   0.010000   0.600000 (  0.603399)
Oj.dump c, aj    0.720000   0.000000   0.720000 (  0.719607)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | 👌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | 👌             | 👌             | 👌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | 👌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | 👌             | 👌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Complex                         | 💀            | 💀             | 👌             | 👌                      |
| Exception                       | 💀            | ❌             | ❌             | 👌                      |
| OpenStruct                      | 💀            | ❌             | 👌             | 👌                      |
| Rational                        | 💀            | ❌             | ❌             | ❌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | 💀            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   473.013M memsize (   344.000  retained)
                         9.610M objects (     5.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   145.650M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
           Oj.dump c   145.650M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)
       Oj.dump c, aj   145.650M memsize (     0.000  retained)
                         3.040M objects (     0.000  retained)
                        44.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  145650000 allocated
           Oj.dump c:  145650000 allocated - same
       Oj.dump c, aj:  145650000 allocated - same
            to_json::  473012520 allocated - 3.25x more
---------------------------------------------

                     user     system      total        real
to_json:         3.300000   0.130000   3.430000 (  3.453383)
Oj.dump o        0.500000   0.010000   0.510000 (  0.514495)
Oj.dump c        0.560000   0.010000   0.570000 (  0.570794)
Oj.dump c, aj    0.700000   0.000000   0.700000 (  0.699410)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
START gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 👌            | ❌             | 👌             | 👌                      |
| FalseClass                      | 👌            | 👌             | 👌             | 👌                      |
| NilClass                        | 👌            | 👌             | 👌             | 👌                      |
| Object                          | ❌            | ❌             | 👌             | 👌                      |
| TrueClass                       | 👌            | 👌             | 👌             | 👌                      |
| String                          | 👌            | 👌             | 👌             | 👌                      |
| StringChinese                   | 👌            | 👌             | 👌             | 👌                      |
| StringSpecial                   | ❌            | 👌             | 👌             | 👌                      |
| Numeric                         | 👌            | 👌             | 👌             | 👌                      |
| Symbol                          | 👌            | ❌             | 👌             | 👌                      |
| Time                            | ❌            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 👌            | ❌             | 👌             | 👌                      |
| DateTime                        | ❌            | ❌             | 👌             | 👌                      |
| Enumerable                      | ❌            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 👌            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | ❌            | 👌             | 👌             | 👌                      |
| Struct                          | ❌            | ❌             | ❌             | 👌                      |
| Float                           | 👌            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 👌            | ❌             | 👌             | 👌                      |
| Complex                         | 👌            | 💀             | 👌             | 👌                      |
| Exception                       | ❌            | ❌             | ❌             | 👌                      |
| OpenStruct                      | ❌            | ❌             | 👌             | 👌                      |
| Rational                        | 👌            | ❌             | ❌             | ❌                      |
| Process::Status                 | ❌            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | ❌            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | ❌            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | ❌            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 👌            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | ❌            | ❌             | ❌             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   449.442M memsize (   536.000  retained)
                         9.510M objects (     6.000  retained)
                        50.000  strings (     0.000  retained)
           Oj.dump o   139.450M memsize (     0.000  retained)
                         2.940M objects (     0.000  retained)
                        41.000  strings (     0.000  retained)
           Oj.dump c   139.450M memsize (     0.000  retained)
                         2.940M objects (     0.000  retained)
                        41.000  strings (     0.000  retained)
       Oj.dump c, aj   139.450M memsize (     0.000  retained)
                         2.940M objects (     0.000  retained)
                        41.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  139450000 allocated
           Oj.dump c:  139450000 allocated - same
       Oj.dump c, aj:  139450000 allocated - same
            to_json::  449442272 allocated - 3.22x more
---------------------------------------------

                     user     system      total        real
to_json:         3.000000   0.020000   3.020000 (  3.025067)
Oj.dump o        0.530000   0.020000   0.550000 (  0.551964)
Oj.dump c        0.490000   0.010000   0.500000 (  0.505372)
Oj.dump c, aj    0.660000   0.000000   0.660000 (  0.664575)

SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | 👌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | 👌             | 👌             | 👌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | 👌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | 👌             | 👌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Complex                         | 💀            | 💀             | 👌             | 👌                      |
| Exception                       | 💀            | ❌             | ❌             | 👌                      |
| OpenStruct                      | 💀            | ❌             | 👌             | 👌                      |
| Rational                        | 💀            | ❌             | ❌             | ❌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | 💀            | 💀             | 💀             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   471.503M memsize (   464.000  retained)
                         9.570M objects (     7.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o   145.340M memsize (     0.000  retained)
                         3.030M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)
           Oj.dump c   145.340M memsize (     0.000  retained)
                         3.030M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)
       Oj.dump c, aj   145.340M memsize (     0.000  retained)
                         3.030M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)

Comparison:
       Oj.dump c, aj:  145340000 allocated
           Oj.dump o:  145340000 allocated - same
           Oj.dump c:  145340000 allocated - same
            to_json::  471502848 allocated - 3.24x more
---------------------------------------------

                     user     system      total        real
to_json:         3.410000   0.130000   3.540000 (  3.598257)
Oj.dump o        0.280000   0.010000   0.290000 (  0.299252)
Oj.dump c        0.560000   0.010000   0.570000 (  0.585429)
Oj.dump c, aj    0.830000   0.010000   0.840000 (  0.919742)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 💀            | ❌             | 👌             | 👌                      |
| FalseClass                      | 💀            | 👌             | 👌             | 👌                      |
| NilClass                        | 💀            | 👌             | 👌             | 👌                      |
| Object                          | 💀            | ❌             | 👌             | 👌                      |
| TrueClass                       | 💀            | 👌             | 👌             | 👌                      |
| String                          | 💀            | 👌             | 👌             | 👌                      |
| StringChinese                   | 💀            | 👌             | 👌             | 👌                      |
| StringSpecial                   | 💀            | 👌             | 👌             | 👌                      |
| Numeric                         | 💀            | 👌             | 👌             | 👌                      |
| Symbol                          | 💀            | ❌             | 👌             | 👌                      |
| Time                            | 💀            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 💀            | ❌             | 👌             | 👌                      |
| DateTime                        | 💀            | ❌             | 👌             | 👌                      |
| Enumerable                      | 💀            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 💀            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | 💀            | 👌             | 👌             | 👌                      |
| Struct                          | 💀            | ❌             | ❌             | 👌                      |
| Float                           | 💀            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 💀            | ❌             | 👌             | 👌                      |
| Complex                         | 💀            | 💀             | 👌             | 👌                      |
| Exception                       | 💀            | ❌             | ❌             | 👌                      |
| OpenStruct                      | 💀            | ❌             | 👌             | 👌                      |
| Rational                        | 💀            | ❌             | ❌             | ❌                      |
| Process::Status                 | 💀            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | 💀            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | 💀            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | 💀            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 💀            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | 💀            | 💀             | 💀             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   468.303M memsize (   464.000  retained)
                         9.490M objects (     7.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o   139.740M memsize (     0.000  retained)
                         2.890M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)
           Oj.dump c   139.740M memsize (     0.000  retained)
                         2.890M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)
       Oj.dump c, aj   139.740M memsize (     0.000  retained)
                         2.890M objects (     0.000  retained)
                        40.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  139740000 allocated
           Oj.dump c:  139740000 allocated - same
       Oj.dump c, aj:  139740000 allocated - same
            to_json::  468302848 allocated - 3.35x more
---------------------------------------------

                     user     system      total        real
to_json:         3.240000   0.030000   3.270000 (  3.289044)
Oj.dump o        0.500000   0.020000   0.520000 (  0.520356)
Oj.dump c        0.560000   0.020000   0.580000 (  0.587339)
Oj.dump c, aj    0.710000   0.000000   0.710000 (  0.720746)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
START gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
bundle install --deployment --path /Users/vvysokins/projects/ruby-json-benchmark/vendor/bundle --quiet
bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb

Comparing Rails to_json with other JSON implementations
+---------------------------------+---------------+----------------+----------------+-------------------------+
| class                           | JSON.generate | Oj.dump object | Oj.dump compat | Oj.dump compat, as_json |
+---------------------------------+---------------+----------------+----------------+-------------------------+
| Regexp                          | 👌            | ❌             | 👌             | 👌                      |
| FalseClass                      | 👌            | 👌             | 👌             | 👌                      |
| NilClass                        | 👌            | 👌             | 👌             | 👌                      |
| Object                          | ❌            | ❌             | 👌             | 👌                      |
| TrueClass                       | 👌            | 👌             | 👌             | 👌                      |
| String                          | 👌            | 👌             | 👌             | 👌                      |
| StringChinese                   | 👌            | 👌             | 👌             | 👌                      |
| StringSpecial                   | ❌            | 👌             | 👌             | 👌                      |
| Numeric                         | 👌            | 👌             | 👌             | 👌                      |
| Symbol                          | 👌            | ❌             | 👌             | 👌                      |
| Time                            | ❌            | ❌             | 👌             | 👌                      |
| Array                           | 👌            | 👌             | 👌             | 👌                      |
| Hash                            | 👌            | 👌             | 👌             | 👌                      |
| HashNotEmpty                    | 👌            | ❌             | 👌             | 👌                      |
| Date                            | 👌            | ❌             | 👌             | 👌                      |
| DateTime                        | ❌            | ❌             | 👌             | 👌                      |
| Enumerable                      | ❌            | ❌             | ❌             | 👌                      |
| BigDecimal                      | 👌            | 👌             | 👌             | 👌                      |
| BigDecimalInfinity              | ❌            | 👌             | 👌             | 👌                      |
| Struct                          | ❌            | ❌             | ❌             | 👌                      |
| Float                           | 👌            | 👌             | 👌             | 👌                      |
| FloatInfinity                   | 💀            | ❌             | 👌             | 👌                      |
| Range                           | 👌            | ❌             | 👌             | 👌                      |
| Complex                         | 👌            | 💀             | 👌             | 👌                      |
| Exception                       | 👌            | ❌             | ❌             | 👌                      |
| OpenStruct                      | ❌            | ❌             | 👌             | 👌                      |
| Rational                        | 👌            | ❌             | ❌             | ❌                      |
| Process::Status                 | ❌            | ❌             | ❌             | 👌                      |
| ActiveSupport::TimeWithZone     | ❌            | ❌             | ❌             | 👌                      |
| ActiveModel::Errors             | ❌            | 💀             | 💀             | 👌                      |
| ActiveSupport::Duration         | ❌            | ❌             | 👌             | 👌                      |
| ActiveSupport::Multibyte::Chars | 👌            | ❌             | ❌             | 👌                      |
| ActiveRecord::Relation          | ❌            | 💀             | 💀             | 👌                      |
+---------------------------------+---------------+----------------+----------------+-------------------------+

Calculating -------------------------------------
            to_json:   445.533M memsize (   656.000  retained)
                         9.410M objects (     8.000  retained)
                        50.000  strings (     1.000  retained)
           Oj.dump o   134.340M memsize (     0.000  retained)
                         2.810M objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
           Oj.dump c   134.340M memsize (     0.000  retained)
                         2.810M objects (     0.000  retained)
                        36.000  strings (     0.000  retained)
       Oj.dump c, aj   134.340M memsize (     0.000  retained)
                         2.810M objects (     0.000  retained)
                        36.000  strings (     0.000  retained)

Comparison:
           Oj.dump o:  134340000 allocated
           Oj.dump c:  134340000 allocated - same
       Oj.dump c, aj:  134340000 allocated - same
            to_json::  445532520 allocated - 3.32x more
---------------------------------------------

                     user     system      total        real
to_json:         3.330000   0.020000   3.350000 (  3.390271)
Oj.dump o        0.590000   0.030000   0.620000 (  0.668228)
Oj.dump c        0.540000   0.020000   0.560000 (  0.574351)
Oj.dump c, aj    0.690000   0.010000   0.700000 (  0.708385)

SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0
rm -rf .bundle

Results:
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.1.16.gemfile rvm: 2.3.3
FAILURE gemfile: gemfiles/4.1.16.gemfile rvm: 2.4.0
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/4.2.8.gemfile  rvm: 2.4.0
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.2.6
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.3.3
SUCCESS gemfile: gemfiles/5.0.2.gemfile  rvm: 2.4.0

Failed:
BUNDLE_GEMFILE=gemfiles/4.1.16.gemfile RBENV_VERSION=2.4.0 bundle exec ruby compatibility_test.rb && bundle exec ruby benchmark2.rb
